\section{Methodology}

\subsection{System Architecture Overview}
The HealthHub platform is built around two primary AI components: a RAG pipeline for medical record processing and an SQL agent for sensor data analysis. Fig. 1 illustrates the high-level system architecture.

\begin{figure}[!t]
\centering
\includegraphics[width=\columnwidth]{figures/system-architecture}
\caption{HealthHub System Architecture showing RAG Pipeline and SQL Agent integration}
\label{fig:system-architecture}
\end{figure}

\subsection{RAG Pipeline Implementation}
The RAG pipeline processes medical records through the following steps:

\begin{enumerate}
\item \textbf{Document Processing:} Medical records are chunked and processed for embedding generation
\item \textbf{Vector Storage:} Embeddings are stored in a Supabase vector database using pgvector
\item \textbf{Context Retrieval:} User queries trigger similarity search for relevant context
\item \textbf{Response Generation:} Retrieved context augments LLM responses for accuracy
\end{enumerate}

\subsection{SQL Agent Architecture}
The SQL agent handles real-time sensor data through:

\begin{enumerate}
\item \textbf{Query Generation:} Natural language is converted to SQL via LLM
\item \textbf{Schema Understanding:} Agent maintains awareness of sensor data structure
\item \textbf{Query Optimization:} Automated query refinement for performance
\item \textbf{Result Processing:} Conversion of SQL results to natural language insights
\end{enumerate}

\begin{figure}[!t]
\centering
\includegraphics[width=\columnwidth]{figures/sql-agent-flow}
\caption{SQL Agent Query Processing Flow}
\label{fig:sql-agent-flow}
\end{figure}

\subsection{Integration Architecture}
The integration between RAG pipeline and SQL agent enables:

\begin{itemize}
\item Unified query interface for both medical records and sensor data
\item Cross-referencing between historical records and real-time data
\item Automated context switching based on query type
\item Combined insights from both structured and unstructured data
\end{itemize} 